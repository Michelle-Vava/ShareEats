{% extends 'base_templates/seller_dashboard_base.html' %}
{% block content %}
 <h1 style="font-family: Arial; font-size: 40px">
        <b>  Seller Dashboard</b>
    </h1>
<br>

    <div class="container-fluid border">
        <div class="row">
            <div class="col-9 border" style="height: 550px; padding: 15px">
                <h3 style="background: white">Completed Orders</h3>
                <div class="container" style="background: white; height: 460px">
                    <div class="container border table-wrapper-scroll-y my-custom-scrollbar" >
                        <table class="table table-striped">
                            <thead class="table-dark">
                            <tr>
                                <th scope="col">OrderID #</th>
                                <th scope="col">Buyer Name</th>
                                <th scope="col">Ordered Item</th>
                                <th scope="col">Price</th>
                                <th scope="col">Order Date/Time</th>
                                <th scope="col">Order Status</th>
                            </tr>
                            </thead>
                           <p></p>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col border" style="height: 550px; padding: 10px">
                <div class="justify-content-center card container border" style="width: 20rem;">
                      {% if userdetails.image %}
                      <img class="card-img-top" src="{{ userdetails.image.url }}">
                      {% else %}
                      {% load static %}
                      <img class="card-img-top" src="../static/img/default_profile.png" %}>
                      {% endif %}
                      <div class="card-body">
                        <h4 class="card-title" style="text-align: center"><b>{{ userdetails.businessname }}</b></h4>
                        <h6 class="card-text">Description</h6>
                        <p class="card-text">
                          {{ userdetails.description }}
                        </p>
                        <h6 class="card-text">Business Number</h6>
                        <p class="card-text">
                          {{ userdetails.business_phone_number }}
                        </p>
                        <h6 class="card-text">Business Address</h6>
                        <p class="card-text">
                          {{ userdetails.address }}
                        </p>
                        <h6 class="card-text">Business Hours</h6>
                        <p class="card-text">
                          Enter Business hours
                        </p>
                      </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col" style="padding: 15px">
                <div class="container-fluid border">
                  <h3>Current Orders Made</h3>
                  <div class="row mt-5 justify-content-center" style="background: white">
                    {% for orderid, purchaseobj in order_dict.items %}
                    <div class="card-deck mx-2 mb-3" >
                      <div class="card card_style mb-3 " style="width: 19rem;">
                        <h4 class="card-title" style="font-weight: bold; color: #FBC226">Order# {{ orderid }}</h4>
                        <div class="card-body">
                          {% for pur in purchaseobj %}

                            {% if pur.order_status != "completed" %}
                            <img class="card-img-top" src="{{ pur.product.image.url }}" alt="Card image cap">
                            <p class="card-text">
                              <strong>Buyer Name:</strong> {{ pur.order.buyer.firstname }} {{ pur.order.buyer.lastname }}
                            </p>
                            <p class="card-text">
                              <strong>Product:</strong> {{ pur.product.product }}
                            </p>
                            <p class="card-text">
                              <strong>Price:</strong><a style="font-weight: bold; color: #FBC226">$ {{ pur.seller_price | floatformat:2 }}</a>
                            </p>
                            <p class="card-text">
                              <strong>Qty:</strong> {{ pur.quantity }}
                            </p>
                            <p class="card-text" style="text-transform: capitalize;">
                              <strong>Status:</strong> {{ pur.order_status }}
                            </p>

                            {% if pur.order_status != "In Progress" %}
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                              aria-haspopup="true" aria-expanded="false">
                              Update Order status
                            </button>

                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                              <a class="dropdown-item" href="{% url 'up-order-status' pur.id %}">In Progress</a>
                            </div>
                            <br>

                            {% else %}
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                              aria-haspopup="true" aria-expanded="false">
                              Update Order status
                            </button>

                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                              <a class="dropdown-item" href="{% url 'up-order-status' pur.id %}">Completed</a>
                            </div>
                            <br>
                            {% endif %}
                            {% endif %}

                          {% endfor %}
                        </div>
                      </div>
                    </div>
                    {% endfor %}
                  </div>
                </div>
            </div>
            </div>

    </div>

<!--
<div class="container-fluid">
  <div class="row">
    <div class="col-lg-8">
      <div class="border border-warning">
        <br>
        <h3>Completed Orders</h3>
        <div class="table-wrapper-scroll-y my-custom-scrollbar">
          <table class="table table-striped">
            <thead class="table-dark">
              <tr>
                <th scope="col">OrderID #</th>
                <th scope="col">Buyer Name</th>
                <th scope="col">Ordered Item</th>
                <th scope="col">Price</th>
                <th scope="col">Order Date/Time</th>
                <th scope="col">Order Status</th>
              </tr>
            </thead>
            <tbody>
              {% for order, buyer, purchase, product in all_completed %}
              <tr>
                <td scope="row">{{ order.id }}</td>
                <td>{{ buyer.firstname }} {{ buyer.lastname }}</td>
                <td>{{ product.product }}</td>
                <td>$ {{ purchase.seller_price }}</td>
                <td>{{ order.timestamp }}</td>
                <td style="text-transform: capitalize;">{{ purchase.order_status }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="border border-warning">
        <br>
        <h3>Seller Profile</h3>
        <div class="justify-content-center card" style="width: 18rem;">
          {% if userdetails.image %}
          <img class="card-img-top" src="{{ userdetails.image.url }}">
          {% else %}
          {% load static %}
          <img class="card-img-top" src="../static/img/default_profile.png" %}>
          {% endif %}
          <div class="card-body">
            <h4 class="card-title">{{ userdetails.businessname }}</h4>
            <h6 class="card-text">Description</h6>
            <p class="card-text">
              {{ userdetails.description }}
            </p>
            <h6 class="card-text">Business Number</h6>
            <p class="card-text">
              {{ userdetails.business_phone_number }}
            </p>
            <h6 class="card-text">Business Address</h6>
            <p class="card-text">
              {{ userdetails.address }}
            </p>
            <h6 class="card-text">Business Hours</h6>
            <p class="card-text">
              Enter Business hours
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<br>
-->

<!-- <div class="container-fluid border border-warning">
  <h3>Current Orders Made</h3>
  <div class="row mt-5 justify-content-center">

    {% for orderid, purchaseobj in order_dict.items %}

    <div class="card-deck mx-2 mb-3">
      <div class="card card_style mb-3 card_zoom" style="width: 19rem;">
        <h4 class="card-title" style="font-weight: bold; color: #FBC226">Order# {{ orderid }}</h4>

        <div class="card-body">
          
          {% for pur in purchaseobj %}
          <img class="card-img-top" src="{{ pur.product.image.url }}" alt="Card image cap">
          <p class="card-text"><strong>Buyer Name:</strong> {{ pur.order.buyer.firstname }} {{ pur.order.buyer.lastname }}</p>
          <p class="card-text"><strong>Product: </strong> {{ pur.product.product }}</p>
          <p class="card-text"><strong>Price:</strong><a style="font-weight: bold; color: #FBC226"> $ {{ pur.seller_price }}</a> </p>
          <p class="card-text"><strong>Qty:</strong> {{ pur.quantity }}</p>
          <p class="card-text"><strong>Status:</strong> {{ pur.order_status }}</p>
          <div class="dropdown">
            <button type="button" class="btn btn-outline-warning">Update Order Status</button>
          </div>
          </p>
          {% endfor %}
        </div>

      </div>
    </div>
    {% endfor %}
  </div> -->

<br>
<!--
<div class="container-fluid border border-warning">
  <h3>Current Orders Made</h3>
  <div class="row mt-5 justify-content-center">
    {% for orderid, purchaseobj in order_dict.items %}
    <div class="card-deck mx-2 mb-3">
      <div class="card card_style mb-3 " style="width: 19rem;">
        <h4 class="card-title" style="font-weight: bold; color: #FBC226">Order# {{ orderid }}</h4>
        <div class="card-body">
          {% for pur in purchaseobj %}

            {% if pur.order_status != "completed" %}
            <img class="card-img-top" src="{{ pur.product.image.url }}" alt="Card image cap">
            <p class="card-text">
              <strong>Buyer Name:</strong> {{ pur.order.buyer.firstname }} {{ pur.order.buyer.lastname }}
            </p>
            <p class="card-text">
              <strong>Product:</strong> {{ pur.product.product }}
            </p>
            <p class="card-text">
              <strong>Price:</strong><a style="font-weight: bold; color: #FBC226">$ {{ pur.seller_price | floatformat:2 }}</a>
            </p>
            <p class="card-text">
              <strong>Qty:</strong> {{ pur.quantity }}
            </p>
            <p class="card-text" style="text-transform: capitalize;">
              <strong>Status:</strong> {{ pur.order_status }}
            </p>

            {% if pur.order_status != "In Progress" %}
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Update Order status
            </button>
            
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="{% url 'up-order-status' pur.id %}">In Progress</a>
            </div>
            <br>

            {% else %}
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Update Order status
            </button>
            
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="{% url 'up-order-status' pur.id %}">Completed</a>
            </div>
            <br>
            {% endif %}
            {% endif %}

          {% endfor %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
-->
{% endblock %}